<!DOCTYPE html>
<html lang="en">

<head>
    <script>// Code below taken from Assignmnet 3 code examples</script>
    <script src="./functions.js"></script>
    <script>
        var products_data;
        var total = 0;
        loadJSON('get_products_data', function (response) {
            // Parsing JSON string into object
            products_data = JSON.parse(response);
        });

        // get the query string
        let params = (new URL(document.location)).searchParams;
        if (params.has('products_key')) {
            var products_key = params.get('products_key');
        } else {
            document.write('no products key in query string, select a brand on the navigastion bar please');
            document.stop;
        }
    </script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="banner" style="background-color: black;">
        <div class="banner-center" style="background-color: black;color: mintcream;">
            <h1>Sean's Shoe Store</h1>
        </div>
    </div>
    <script>nav_bar(products_key, products_data);</script>
    <br>
    <script>
        // This function will just display the product based on the key strin gin the query and show the correpsonding product 'BASED ON BRAND'
        var display_str = `<h2>${products_key} shoes</h2><br>`;
        // get the specific brand in order to display corresponding products
        products = products_data[products_key];
        // now to generate display divs
        for (i = 0; i < products.length; i++) {
            display_str += `
            <form action="" method="POST">
                <div class="item-box">
                    <div class="product-info">
                        <img src=${products[i]['image']}>
                    <h3>${products[i]['name']}</h3>
                    <h3>$${products[i]['price']}</h3><br>
                        </div>
                    <div class="product-input">
                        <h4><label id="${products[i]}_label"">How many? </label></h4>
                        <input type="text" placeholder="${products[i]['quantity_available']} available" name="quantity${i}" onkeyup="checkQuantityTextbox(this);"><br><span class="span" id="${products[i]}_error"></span></div>
                        </div>
                    </div>
                
            `;
        };
        display_str += `<input type="hidden" name="products_key" value="${products_key}"> <input type="submit" class="button" value="Add to Cart" name="submit"></form>`;

        // Now to show display_str
        document.write(display_str);
    </script>
</body>

</html>